{% extends "base.html" %}

{% block title %}WQI Methodology - Jal Sarovar{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('wqi.calculator_page') }}">WQI Calculator</a></li>
                    <li class="breadcrumb-item active">Methodology</li>
                </ol>
            </nav>
            <h1 class="mb-3">
                <i class="bi bi-book"></i> Water Quality Index Methodology
            </h1>
            <p class="lead text-muted">
                Understanding how the Water Quality Index (WQI) is calculated
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <!-- Overview -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-info-circle"></i> Overview</h5>
                </div>
                <div class="card-body">
                    <p>
                        The Water Quality Index (WQI) is a composite score from 0-100 that provides a simple,
                        standardized way to assess overall water quality for drinking purposes. It combines
                        multiple water quality parameters into a single number that is easy to understand.
                    </p>
                    <p>
                        Our WQI calculation follows WHO (World Health Organization) and BIS (Bureau of Indian Standards)
                        guidelines for drinking water quality (IS 10500:2012).
                    </p>
                </div>
            </div>

            <!-- Calculation Method -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="bi bi-calculator"></i> Calculation Method</h5>
                </div>
                <div class="card-body">
                    <p>The WQI uses a <strong>penalty-based scoring system</strong>:</p>
                    <div class="alert alert-secondary">
                        <code>WQI = 100 - (Sum of all penalties)</code>
                    </div>
                    <p>Each parameter that deviates from optimal ranges adds a penalty to reduce the score.</p>

                    <h6 class="mt-4">Parameter Penalties:</h6>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th>Parameter</th>
                                    <th>Optimal Range</th>
                                    <th>Max Penalty</th>
                                    <th>Penalty Calculation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>pH</strong></td>
                                    <td>6.5 - 8.5</td>
                                    <td>20 points</td>
                                    <td>Deviation from range x 10</td>
                                </tr>
                                <tr>
                                    <td><strong>TDS</strong></td>
                                    <td>500 ppm max</td>
                                    <td>30 points</td>
                                    <td>(TDS - 500) / 50</td>
                                </tr>
                                <tr>
                                    <td><strong>Turbidity</strong></td>
                                    <td>5 NTU max</td>
                                    <td>20 points</td>
                                    <td>(Turbidity - 5) x 2</td>
                                </tr>
                                <tr>
                                    <td><strong>Chlorine</strong></td>
                                    <td>0.2 - 4.0 mg/L</td>
                                    <td>15 points</td>
                                    <td>15 if &lt;0.2, 10 if &gt;4.0</td>
                                </tr>
                                <tr>
                                    <td><strong>Temperature</strong></td>
                                    <td>10 - 25 C</td>
                                    <td>10 points</td>
                                    <td>Deviation-based penalty</td>
                                </tr>
                                <tr>
                                    <td><strong>Coliform</strong></td>
                                    <td>0 CFU/100mL</td>
                                    <td>25 points</td>
                                    <td>Coliform count x 2.5</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Classification -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="bi bi-tags"></i> WQI Classification</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="p-3 rounded text-white" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                <h4>Excellent (90-100)</h4>
                                <p class="mb-0">
                                    All parameters within optimal ranges. Water is safe for drinking
                                    and all domestic purposes.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="p-3 rounded text-white" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                                <h4>Compliant (70-89)</h4>
                                <p class="mb-0">
                                    Water meets drinking water standards with minor deviations.
                                    Safe for consumption.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="p-3 rounded text-white" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                                <h4>Warning (50-69)</h4>
                                <p class="mb-0">
                                    Some parameters exceed acceptable limits. Treatment or boiling
                                    recommended before drinking.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="p-3 rounded text-white" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                                <h4>Unsafe (0-49)</h4>
                                <p class="mb-0">
                                    Water does not meet safety standards. DO NOT drink without
                                    professional treatment.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Standards Reference -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="bi bi-journal-text"></i> Standards Reference</h5>
                </div>
                <div class="card-body">
                    <ul>
                        <li><strong>WHO Guidelines:</strong> Guidelines for Drinking-water Quality, 4th Edition</li>
                        <li><strong>BIS Standards:</strong> IS 10500:2012 - Indian Standard for Drinking Water</li>
                        <li><strong>CPCB:</strong> Central Pollution Control Board water quality criteria</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-calculator"></i> Try the Calculator</h5>
                </div>
                <div class="card-body text-center">
                    <p>Calculate WQI for your water sample</p>
                    <a href="{{ url_for('wqi.calculator_page') }}" class="btn btn-success btn-lg">
                        <i class="bi bi-arrow-right-circle"></i> Open Calculator
                    </a>
                </div>
            </div>

            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="bi bi-lightbulb"></i> Quick Tips</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success"></i>
                            Enter as many parameters as available for accurate results
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success"></i>
                            Coliform presence is a critical indicator of contamination
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success"></i>
                            pH outside 6.5-8.5 may indicate contamination or mineral imbalance
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-success"></i>
                            High TDS (&gt;500 ppm) affects taste and may indicate pollution
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="bi bi-question-circle"></i> Need Help?</h5>
                </div>
                <div class="card-body">
                    <p>
                        If your water quality test shows Warning or Unsafe levels,
                        consider these actions:
                    </p>
                    <ol class="mb-0">
                        <li>Contact local water authority</li>
                        <li>Use water purification methods</li>
                        <li>Consider professional water testing</li>
                        <li>Use alternative safe water sources</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
